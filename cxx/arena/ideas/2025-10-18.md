# 用64位数字存储属性克制关系

在[Attr](../entity/Attr.h)的 AttrChart 实现过程中，可以只存储21个64位整数，每个整数代表该行作为 atk 方的时候，对各属性的克制关系：每个AttrAdvantage占2bit（00=Neutral, 01=Counter, 10=Resist） 最后转为hex（方便显示）。

```cpp
static constexpr uint64_t attrPacked[N] = {
    0x20200,
    0x2140062102,
    0x4201012008,
    0x1A00402008,
    0x9209892228,
    0xA181401222,
    0x10048A90500,
    0x10A028000,
    0x4604090108,
    0x910060200,
    0x14200200,
    0x8128908620,
    0x4062440200,
    0x104A00,
    0x1200,
    0x20104A00,
    0xA840010222,
    0x0,
    0x15555555546,
    0x15555555561,
    0x15555555558
};

inline static AttrAdvantage AttrRelation(AttrType atk, AttrType def) {
    return static_cast<AttrAdvantage>( (attrPacked[int(atk)] >> ((N - int(def)) * 2)) & 3);
}
```

此处使用MSB存储，也可使用LSB，最后右移的时候就不需要`N - int(def)`了。之后可以实现一下，先把它从代码里删掉了。